# ë‹¤êµ­ì–´ ì–¸ì–´ ì„ íƒ ë™ê¸°í™” ìˆ˜ì • ì™„ë£Œ ë³´ê³ ì„œ

## ğŸ“… ì‘ì„±ì¼
2025-11-26

## ğŸ” ë¬¸ì œ ë¶„ì„

### ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­
> "ì–¸ì–´ë¥¼ í•œêµ­ì–´ë¡œ ì„¤ì •í•˜ë©´ í•œêµ­ì–´ ë©”ë‰´ê°€, ì˜ì–´ë¡œ ì„¤ì •í•˜ë©´ ì˜ì–´ ë©”ë‰´ê°€, ì¤‘êµ­ì–´ë¡œ ì„¤ì •í•˜ë©´ ì¤‘êµ­ì–´ ë©”ë‰´ê°€ ìì—°ìŠ¤ëŸ½ê²Œ í‘œì‹œë˜ì–´ì•¼ í•œë‹¤."

### ë°œê²¬ëœ ë¬¸ì œ
1. **ì¦ìƒ**: ì‚¬ìš©ìê°€ ì–¸ì–´ ì„ íƒê¸°ì—ì„œ 'KR'ì„ ì„ íƒí•´ë„, í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ë©´ ë©”ë‰´ê°€ ì˜ì–´ë¡œ í‘œì‹œë¨
2. **ìŠ¤í¬ë¦°ìƒ· í™•ì¸**: ì–¸ì–´ ì„ íƒê¸°ëŠ” 'KR'ë¡œ ì„ íƒë˜ì–´ ìˆì§€ë§Œ, ë©”ë‰´ëŠ” "Gallery", "Recommendations" ë“± ì˜ì–´ë¡œ í‘œì‹œ
3. **ê·¼ë³¸ ì›ì¸**: 
   - í´ë¼ì´ì–¸íŠ¸ ì¸¡ i18n.jsê°€ `localStorage`ì—ë§Œ ì–¸ì–´ ì„¤ì •ì„ ì €ì¥
   - ì„œë²„ ì¸¡(SSR)ì€ `localStorage`ë¥¼ ì½ì„ ìˆ˜ ì—†ìŒ
   - ì„œë²„ê°€ ë¸Œë¼ìš°ì €ì˜ `Accept-Language` í—¤ë”ì—ë§Œ ì˜ì¡´í•˜ì—¬ ë©”ë‰´ë¥¼ ë Œë”ë§

---

## âœ… í•´ê²° ë°©ë²•

### 1. í´ë¼ì´ì–¸íŠ¸ ì¸¡ ìˆ˜ì • (`public/static/i18n.js`)
**ì–¸ì–´ ì„ íƒ ì‹œ ì¿ í‚¤ì—ë„ ì €ì¥**

```javascript
setLanguage(lang) {
  if (!this.isLanguageSupported(lang)) {
    console.error(`Language not supported: ${lang}`);
    return false;
  }
  
  this.currentLanguage = lang;
  localStorage.setItem('gallerypia_language', lang);
  
  // CRITICAL: Also save to cookie so server can read it
  document.cookie = `gallerypia_language=${lang}; path=/; max-age=31536000; SameSite=Lax`;
  
  this.applyLanguage(lang);
  
  // Emit language change event
  document.dispatchEvent(new CustomEvent('language-changed', { detail: { language: lang } }));
  
  console.log(`ğŸŒ Language changed to: ${lang} (saved to localStorage and cookie)`);
  return true;
}
```

**ë³€ê²½ ë‚´ìš©:**
- `localStorage`ì— ì €ì¥ (í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ ì‚¬ìš©)
- `cookie`ì—ë„ ë™ì¼í•˜ê²Œ ì €ì¥ (ì„œë²„ ì¸¡ì—ì„œ ì½ì„ ìˆ˜ ìˆë„ë¡)
- ì¿ í‚¤ ìœ íš¨ê¸°ê°„: 1ë…„ (max-age=31536000)

### 2. ì„œë²„ ì¸¡ ìˆ˜ì • (`src/index.tsx`)
**ì¿ í‚¤ë¥¼ ìš°ì„ ì ìœ¼ë¡œ í™•ì¸í•˜ë„ë¡ ìˆ˜ì •**

```typescript
function getUserLanguage(c: any): string {
  // 1. Try to get from query parameter (highest priority)
  const queryLang = c.req.query('lang')
  if (queryLang && ['ko', 'en', 'zh', 'ja'].includes(queryLang)) {
    return queryLang
  }
  
  // 2. Try to get from cookie (set by client-side language selector)
  const cookieLang = getCookie(c, 'gallerypia_language')
  if (cookieLang && ['ko', 'en', 'zh', 'ja'].includes(cookieLang)) {
    return cookieLang
  }
  
  // 3. Try to get from Accept-Language header
  const acceptLanguage = c.req.header('Accept-Language')
  if (acceptLanguage) {
    const lang = acceptLanguage.split(',')[0].split('-')[0].toLowerCase()
    if (['ko', 'en', 'zh', 'ja'].includes(lang)) {
      return lang
    }
  }
  
  // 4. Default to Korean
  return 'ko'
}
```

**ìš°ì„ ìˆœìœ„:**
1. **ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°** (`?lang=ko`) - ê°€ì¥ ë†’ì€ ìš°ì„ ìˆœìœ„
2. **ì¿ í‚¤** (`gallerypia_language`) - ì‚¬ìš©ìê°€ ëª…ì‹œì ìœ¼ë¡œ ì„ íƒí•œ ì–¸ì–´
3. **Accept-Language í—¤ë”** - ë¸Œë¼ìš°ì € ì–¸ì–´ ì„¤ì •
4. **ê¸°ë³¸ê°’** - í•œêµ­ì–´ (`ko`)

---

## ğŸ¯ ì˜ˆìƒ ë™ì‘

### ì‹œë‚˜ë¦¬ì˜¤ 1: ì‹ ê·œ ì‚¬ìš©ì (ì¿ í‚¤ ì—†ìŒ)
1. **ì²« ë°©ë¬¸**: ë¸Œë¼ìš°ì €ì˜ `Accept-Language` í—¤ë”ì— ë”°ë¼ ì–¸ì–´ ê²°ì •
   - í•œêµ­ì–´ ë¸Œë¼ìš°ì € â†’ í•œêµ­ì–´ ë©”ë‰´
   - ì˜ì–´ ë¸Œë¼ìš°ì € â†’ ì˜ì–´ ë©”ë‰´
   - ì¤‘êµ­ì–´ ë¸Œë¼ìš°ì € â†’ ì¤‘êµ­ì–´ ë©”ë‰´
2. **ì–¸ì–´ ì„ íƒ**: ì–¸ì–´ ì„ íƒê¸°ì—ì„œ ë‹¤ë¥¸ ì–¸ì–´ ì„ íƒ ì‹œ
   - ì¦‰ì‹œ í™”ë©´ ì—…ë°ì´íŠ¸
   - `localStorage` + `ì¿ í‚¤`ì— ì €ì¥
3. **í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨**: ì„ íƒí•œ ì–¸ì–´ ìœ ì§€ (ì¿ í‚¤ì—ì„œ ì½ìŒ)

### ì‹œë‚˜ë¦¬ì˜¤ 2: ê¸°ì¡´ ì‚¬ìš©ì (ì¿ í‚¤ ìˆìŒ)
1. **í˜ì´ì§€ ì ‘ì†**: ì¿ í‚¤ì— ì €ì¥ëœ ì–¸ì–´ë¡œ ì„œë²„ ì¸¡ ë Œë”ë§
2. **ì¼ê´€ëœ ê²½í—˜**: 
   - ì„œë²„ ì¸¡: ì¿ í‚¤ì—ì„œ ì–¸ì–´ ì½ìŒ â†’ í•´ë‹¹ ì–¸ì–´ë¡œ ë©”ë‰´ ë Œë”ë§
   - í´ë¼ì´ì–¸íŠ¸ ì¸¡: localStorageì—ì„œ ì–¸ì–´ ì½ìŒ â†’ ë™ì¼í•œ ì–¸ì–´ë¡œ ì´ˆê¸°í™”
   - **ê²°ê³¼**: ë©”ë‰´ ê¹œë¹¡ì„ ì—†ì´ ì¼ê´€ëœ ì–¸ì–´ í‘œì‹œ

### ì‹œë‚˜ë¦¬ì˜¤ 3: URL íŒŒë¼ë¯¸í„° ì‚¬ìš©
- `https://gallerypia.pages.dev/?lang=en` - ê°•ì œë¡œ ì˜ì–´ë¡œ í‘œì‹œ
- `https://gallerypia.pages.dev/?lang=zh` - ê°•ì œë¡œ ì¤‘êµ­ì–´ë¡œ í‘œì‹œ

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ë°©ë²•

### âœ… í…ŒìŠ¤íŠ¸ ì ˆì°¨

#### 1ë‹¨ê³„: ê¸°ë³¸ ë™ì‘ í™•ì¸
```bash
# 1. ë¸Œë¼ìš°ì € ì–¸ì–´ ì„¤ì • í™•ì¸
# Chrome: ì„¤ì • > ì–¸ì–´ > ì›í•˜ëŠ” ì–¸ì–´ ìµœìƒë‹¨ ì´ë™

# 2. ì‹œí¬ë¦¿ ëª¨ë“œë¡œ ì ‘ì† (ì¿ í‚¤ ì—†ëŠ” ìƒíƒœ)
https://61d4d3c0.gallerypia.pages.dev/

# 3. ë©”ë‰´ ì–¸ì–´ í™•ì¸
# - ë¸Œë¼ìš°ì € ì–¸ì–´ê°€ í•œêµ­ì–´ â†’ ë©”ë‰´: ê°¤ëŸ¬ë¦¬, ì¶”ì²œ, ì•„í‹°ìŠ¤íŠ¸...
# - ë¸Œë¼ìš°ì € ì–¸ì–´ê°€ ì˜ì–´ â†’ ë©”ë‰´: Gallery, Recommendations, Artists...
```

#### 2ë‹¨ê³„: ì–¸ì–´ ì„ íƒ ë™ì‘ í™•ì¸
```bash
# 1. ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜ì˜ ì–¸ì–´ ì„ íƒê¸° í´ë¦­
# - KR, EN, ZH, JP ë²„íŠ¼ í‘œì‹œë¨

# 2. ë‹¤ë¥¸ ì–¸ì–´ ì„ íƒ (ì˜ˆ: EN â†’ KR)
# - ì¦‰ì‹œ ë©”ë‰´ê°€ í•œêµ­ì–´ë¡œ ë³€ê²½ë˜ì–´ì•¼ í•¨

# 3. ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ ì½˜ì†” í™•ì¸
# - "ğŸŒ Language changed to: ko (saved to localStorage and cookie)" ë©”ì‹œì§€ í™•ì¸

# 4. í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ (F5 ë˜ëŠ” Ctrl+R)
# - ë©”ë‰´ê°€ ì„ íƒí•œ ì–¸ì–´(í•œêµ­ì–´)ë¡œ ìœ ì§€ë˜ì–´ì•¼ í•¨
```

#### 3ë‹¨ê³„: ì¿ í‚¤ í™•ì¸
```bash
# ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ > Application > Cookies
# - Name: gallerypia_language
# - Value: ko (ë˜ëŠ” ì„ íƒí•œ ì–¸ì–´)
# - Path: /
# - Max-Age: 31536000 (1ë…„)
```

### âŒ ë¬¸ì œ ë°œìƒ ì‹œ í™•ì¸ì‚¬í•­

1. **ì¿ í‚¤ ì°¨ë‹¨ ì—¬ë¶€ í™•ì¸**
   - ë¸Œë¼ìš°ì € ì„¤ì •ì—ì„œ ì¿ í‚¤ í—ˆìš© í™•ì¸
   - ì‹œí¬ë¦¿ ëª¨ë“œëŠ” ì¿ í‚¤ë¥¼ í—ˆìš©í•¨

2. **ë¸Œë¼ìš°ì € ìºì‹œ ì™„ì „ ì‚­ì œ**
   ```bash
   Chrome: Ctrl+Shift+Delete
   - ì‹œê°„ ë²”ìœ„: ì „ì²´ ê¸°ê°„
   - ì¿ í‚¤ ë° ê¸°íƒ€ ì‚¬ì´íŠ¸ ë°ì´í„° ì²´í¬
   - ìºì‹œëœ ì´ë¯¸ì§€ ë° íŒŒì¼ ì²´í¬
   ```

3. **ë‹¤ë¥¸ ë¸Œë¼ìš°ì €ë¡œ í…ŒìŠ¤íŠ¸**
   - Chrome ë¬¸ì œ â†’ Edge, Firefox ë“±ìœ¼ë¡œ í…ŒìŠ¤íŠ¸

---

## ğŸ“Š ë°°í¬ ì •ë³´

### Git ì»¤ë°‹
```
commit 029dab0
FIX: Sync language selection to cookie for server-side rendering
```

### ë°°í¬ URL
```
https://61d4d3c0.gallerypia.pages.dev/
```

### ìˆ˜ì •ëœ íŒŒì¼
1. `public/static/i18n.js` - ì¿ í‚¤ ì €ì¥ ë¡œì§ ì¶”ê°€
2. `src/index.tsx` - ì„œë²„ ì¸¡ ì–¸ì–´ ê°ì§€ ë¡œì§ ê°œì„ 

---

## ğŸ‰ ê¸°ëŒ€ íš¨ê³¼

### ì‚¬ìš©ì ê²½í—˜ ê°œì„ 
1. **ì¼ê´€ì„±**: ì–¸ì–´ ì„ íƒì´ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ í›„ì—ë„ ìœ ì§€
2. **ìì—°ìŠ¤ëŸ¬ì›€**: ì„œë²„ ì¸¡ ë Œë”ë§ê³¼ í´ë¼ì´ì–¸íŠ¸ ì¸¡ ë Œë”ë§ ì–¸ì–´ ì¼ì¹˜
3. **êµ­ì œí™”**: í•œêµ­ì–´/ì˜ì–´/ì¤‘êµ­ì–´/ì¼ë³¸ì–´ ì‚¬ìš©ì ëª¨ë‘ ë§Œì¡±

### ê¸°ìˆ ì  ì´ì 
1. **SSR ìµœì í™”**: ì„œë²„ì—ì„œ ì˜¬ë°”ë¥¸ ì–¸ì–´ë¡œ ì´ˆê¸° HTML ë Œë”ë§
2. **SEO ê°œì„ **: ê²€ìƒ‰ ì—”ì§„ì´ ì–¸ì–´ë³„ ì½˜í…ì¸  ì •í™•íˆ ì¸ë±ì‹±
3. **ì„±ëŠ¥**: í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ ì–¸ì–´ ë³€ê²½ìœ¼ë¡œ ì¸í•œ ì¬ë Œë”ë§ ìµœì†Œí™”

---

## âœ… ìµœì¢… í™•ì¸ì‚¬í•­

- [x] í´ë¼ì´ì–¸íŠ¸ ì¸¡ i18n.js ì¿ í‚¤ ì €ì¥ ë¡œì§ ì¶”ê°€
- [x] ì„œë²„ ì¸¡ getUserLanguage() ì¿ í‚¤ ìš°ì„ ìˆœìœ„ ì„¤ì •
- [x] ë¹Œë“œ ì„±ê³µ (1,402.80 KB)
- [x] Cloudflare Pages ë°°í¬ ì„±ê³µ
- [x] Git ì»¤ë°‹ ë° ë¬¸ì„œí™” ì™„ë£Œ

---

## ğŸ“ ì‚¬ìš©ì ì•¡ì…˜ í•„ìš”

### ğŸ”¥ ë°˜ë“œì‹œ ìˆ˜í–‰í•´ì£¼ì„¸ìš”:

1. **ë¸Œë¼ìš°ì € ìºì‹œ ì™„ì „ ì‚­ì œ**
   ```
   Chrome: Ctrl+Shift+Delete
   - ì‹œê°„ ë²”ìœ„: ì „ì²´ ê¸°ê°„ ì„ íƒ
   - "ì¿ í‚¤ ë° ê¸°íƒ€ ì‚¬ì´íŠ¸ ë°ì´í„°" ì²´í¬
   - "ìºì‹œëœ ì´ë¯¸ì§€ ë° íŒŒì¼" ì²´í¬
   - ì‚­ì œ ë²„íŠ¼ í´ë¦­
   ```

2. **ìƒˆ URLë¡œ ì ‘ì†**
   ```
   https://61d4d3c0.gallerypia.pages.dev/
   ```

3. **í…ŒìŠ¤íŠ¸ ì ˆì°¨ ìˆ˜í–‰**
   - ì–¸ì–´ ì„ íƒê¸°ì—ì„œ ì›í•˜ëŠ” ì–¸ì–´ ì„ íƒ (KR, EN, ZH, JP)
   - í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ (F5)
   - ë©”ë‰´ ì–¸ì–´ê°€ ì„ íƒí•œ ì–¸ì–´ë¡œ ìœ ì§€ë˜ëŠ”ì§€ í™•ì¸

4. **ë¬¸ì œ ë°œìƒ ì‹œ ì œê³µí•´ì£¼ì‹¤ ì •ë³´**
   - ìŠ¤í¬ë¦°ìƒ· (F12 ê°œë°œì ë„êµ¬ > Console íƒ­ í¬í•¨)
   - ì‚¬ìš© ì¤‘ì¸ ë¸Œë¼ìš°ì € ë° ë²„ì „
   - ë¸Œë¼ìš°ì € ì–¸ì–´ ì„¤ì • (chrome://settings/languages)

---

**ì‘ì„±ì**: Claude AI Assistant  
**ìµœì¢… ë°°í¬ URL**: https://61d4d3c0.gallerypia.pages.dev/  
**ìƒíƒœ**: âœ… ì™„ë£Œ ë° ë°°í¬ë¨  
